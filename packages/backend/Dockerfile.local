FROM node:20-alpine
RUN npm i -g pnpm
ENV SHELL=bash
RUN pnpm setup
ENV PNPM_HOME="/pnpm"
ENV PATH="$PNPM_HOME:$PATH"
RUN mkdir -p /svr/app
WORKDIR /svr/app
RUN pnpm i -g @nestjs/cli
COPY package.json .
COPY pnpm-lock.yaml .
COPY . .
# Value set in .env file.
EXPOSE $BACKEND_PORT
CMD ["pnpm", "start:dev"]